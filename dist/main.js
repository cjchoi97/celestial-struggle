!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/dist/",i(i.s=1)}([function(e,t,i){},function(e,t,i){"use strict";i.r(t),i.d(t,"game",(function(){return p}));i(0);function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.projectileImg=new Image,this.projectileImg.src=t.img,this.x=t.x,this.y=t.y,this.width=10,this.height=20,this.dx=0,this.dy=t.dy,this.ctx=t.ctx,this.draw=this.draw.bind(this),this.detectHit=this.detectHit.bind(this),this.type=t.type}var t,i,s;return t=e,(i=[{key:"detectHit",value:function(){if(this.hitbox=[this.x,this.x+this.width,this.y+this.height,this.y],"player"===this.type){if(p.enemies)for(var e=0;e<p.enemies.length;e++)if(p.enemies[e]){var t=p.enemies[e].hitBox();this.y<t[2]&&this.x>=t[0]&&this.hitbox[1]<=t[1]&&!(this.hitbox[2]<t[3])&&(console.log("enemy hit by player bullet"),p.removeEnemy(e))}}else if("enemy"===this.type&&p.player){var i=p.player.hitBox();this.hitbox[2]>i[3]&&this.hitbox[0]>=i[0]&&this.hitbox[1]<=i[1]&&!(this.hitbox[3]>i[2])&&(p.player.lives--,0===p.player.lives&&(console.log("WE HAVE LOST"),p.playerProjectiles=[],p.pause()),p.player.recenter(),console.log("player hit by enemy bullet"))}}},{key:"draw",value:function(){this.y+=this.dy,this.ctx.drawImage(this.projectileImg,this.x,this.y,this.width,this.height),this.detectHit(),this.y}}])&&n(t.prototype,i),s&&n(t,s),e}();function r(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var a=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.playerImg=new Image,this.playerImg.src="./src/assets/spaceship.png",this.height=50,this.width=50,this.playerImg.onload=function(){return i.draw()},this.x=this.ctx.canvas.width/2.2,this.y=this.ctx.canvas.height-50,this.draw=this.draw.bind(this),this.dx=0,this.dy=0,this.lives=3,this.fireProjectile=this.fireProjectile.bind(this)}var t,i,n;return t=e,(i=[{key:"recenter",value:function(){this.x=this.ctx.canvas.width/2.2,this.y=this.ctx.canvas.height-50}},{key:"hitBox",value:function(){return[this.x,this.x+this.width,this.y+this.height,this.y]}},{key:"moveHorizontally",value:function(e){this.dx=e}},{key:"moveVertically",value:function(e){this.dy=e}},{key:"fireProjectile",value:function(){return new s({x:this.x+21,y:this.y,dy:-5,ctx:this.ctx,img:"./src/assets/basic-projectile.png",type:"player"})}},{key:"draw",value:function(){this.x+=this.dx,this.y+=this.dy,this.ctx.drawImage(this.playerImg,this.x,this.y,this.width,this.height)}}])&&r(t.prototype,i),n&&r(t,n),e}();function h(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.backgroundImg=new Image,this.backgroundImg.src="./src/assets/space-background.png",this.canvasHeight=t.canvas.height,this.canvasWidth=t.canvas.width,this.y=0,this.draw=this.draw.bind(this)}var t,i,n;return t=e,(i=[{key:"draw",value:function(){this.y+=.5,this.ctx.drawImage(this.backgroundImg,0,this.y),this.ctx.drawImage(this.backgroundImg,0,this.y-this.canvasHeight),this.y===this.canvasHeight&&(this.y=0)}}])&&h(t.prototype,i),n&&h(t,n),e}();function l(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var c=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.keyDownHandler=this.keyDownHandler.bind(this),this.keyUpHandler=this.keyUpHandler.bind(this),window.addEventListener("keydown",this.keyDownHandler),window.addEventListener("keyup",this.keyUpHandler)}var t,i,n;return t=e,(i=[{key:"keyDownHandler",value:function(e){p.player&&("d"===e.key?p.player.moveHorizontally(5):"a"===e.key?p.player.moveHorizontally(-5):"w"===e.key?p.player.moveVertically(-5):"s"===e.key?p.player.moveVertically(5):"p"===e.key&&!1===p.gameOnGoing?(document.getElementById("modal").style.display="none",p.start()):"r"===e.key&&(p.pause(),p.reset(),p.start(),document.getElementById("end-modal").style.display="none"))}},{key:"keyUpHandler",value:function(e){clearInterval(this.keydown),p.player&&("d"==e.key||"a"==e.key?p.player.moveHorizontally(0):("w"===e.key||"s"===e.key)&&p.player.moveVertically(0))}}])&&l(t.prototype,i),n&&l(t,n),e}();function u(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var y=function(){function e(t,i){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.ctx=t,this.time=0,this.enemyImg=new Image,this.enemyImg.src=i.img,this.id=i.id,this.height=i.height,this.width=i.width,this.x=i.x,this.y=i.y,this.dy=i.dy,this.enemyImg.onload=function(){return n.draw()},this.draw=this.draw.bind(this),this.fireProjectile=this.fireProjectile.bind(this),this.selfTimer=this.selfTimer.bind(this),this.detectCollision=this.detectCollision.bind(this),this.projectiles=[]}var t,i,n;return t=e,(i=[{key:"selfTimer",value:function(){this.time++}},{key:"hitBox",value:function(){return[this.x,this.x+this.width,this.y+this.height,this.y]}},{key:"detectCollision",value:function(){var e=this.x,t=this.x+this.width,i=this.y+this.height,n=this.y,s=p.player.hitBox(),r=s[0],a=s[1],h=s[2];i>s[3]&&(r>e&&r<t||a<t&&a>e)&&n<h&&(r>e&&r<t||a<t&&a>e)&&(console.log("player and enemy collide"),p.removeEnemy(this.id),p.player.lives--,0===p.player.lives&&p.pause(),p.player.recenter())}},{key:"fireProjectile",value:function(){return new s({x:this.x+30,y:this.y+70,dy:2,ctx:this.ctx,img:"./src/assets/enemy-projectile.png",type:"enemy"})}},{key:"draw",value:function(){this.y+=this.dy,this.ctx.drawImage(this.enemyImg,this.x,this.y,this.width,this.height),this.projectiles.map((function(e){return e.draw()})),this.detectCollision(),this.y>550&&p.removeEnemy(this.id)}}])&&u(t.prototype,i),n&&u(t,n),e}();var d=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.enemies=t};var m=function(e){for(var t=[],i=e.canvas.width,n=0;n<100;n++){var s=new y(e,{img:"./src/assets/enemy-ship.png",height:70,width:70,x:Math.floor(Math.random()*Math.floor(i-70)),y:-3e3*Math.random()-100,dy:1,id:n});t.push(s)}return new d(t)};function f(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var v=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.canvas=t,this.ctx=i,this.background=new o(this.ctx),this.player=new a(this.ctx),this.playerProjectiles=[],this.enemyProjectiles=[],this.draw=this.draw.bind(this),this.setupControls(),this.levels=[m],this.levelidx=0,this.startTime=0,this.stunTime=0,this.gameOnGoing=!1,this.gameFinished=!1,this.setupLevel()}var t,i,n;return t=e,(i=[{key:"reset",value:function(){this.background=new o(this.ctx),this.player=new a(this.ctx),this.playerProjectiles=[],this.draw=this.draw.bind(this),this.setupControls();for(var e=0;e<this.enemies.lengthl;e++)delete this.enemies[e];this.enemies=[],this.levels=[m],this.levelidx=0,this.startTime=0,this.gameOnGoing=!1,this.setupLevel()}},{key:"enemiesLeft",value:function(){for(var e=0;e<this.enemies.length;e++)if(this.enemies[e])return!0;return!1}},{key:"removeEnemy",value:function(e){for(var t=0;t<this.enemies.length;t++)this.enemies[t]&&this.enemies[t].id===e&&(this.enemies[t].projectiles=[],delete this.enemies[t])}},{key:"setupLevel",value:function(){this.enemies=this.levels[this.levelidx](this.ctx).enemies,this.levelidx++}},{key:"renderBackground",value:function(){this.background.draw()}},{key:"setupControls",value:function(){new c(this.ctx)}},{key:"addProjectile",value:function(e){var t=this.player.fireProjectile();return this.playerProjectiles.push(t),e}},{key:"addEnemyProjectile",value:function(e,t){var i=this.enemies[t].fireProjectile();return this.enemies[t].projectiles.push(i),e}},{key:"gameOver",value:function(){document.getElementById("end-modal").style.display="block",console.log("We here")}},{key:"startStun",value:function(){this.stunTime=10}},{key:"draw",value:function(e){this.startTime=e-this.startTime>300?this.addProjectile(e):this.startTime,this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderBackground(),this.player.draw();for(var t=0;t<this.enemies.length;t++)this.enemies[t]&&(this.enemies[t].draw(e),this.enemies[t]&&this.enemies[t].y>0&&(this.enemies[t].time=e-this.enemies[t].time>3e3?this.addEnemyProjectile(e,t):this.enemies[t].time));if(this.playerProjectiles.map((function(e){return e.draw()})),!this.enemiesLeft())return this.gameOnGoing=!1,void this.gameOver();this.animationLoop=requestAnimationFrame(this.draw)}},{key:"start",value:function(){this.gameOnGoing=!0,this.animationLoop=requestAnimationFrame(this.draw)}},{key:"pause",value:function(){this.animationLoop&&(console.log("GAME SHOULD PAUSE"),cancelAnimationFrame(this.animationLoop))}}])&&f(t.prototype,i),n&&f(t,n),e}(),p=null;document.addEventListener("DOMContentLoaded",(function(){var e=document.getElementById("canvas"),t=e.getContext("2d");p=new v(e,t),window.game=p}))}]);
//# sourceMappingURL=main.js.map