!function(t){var e={};function i(n){if(e[n])return e[n].exports;var r=e[n]={i:n,l:!1,exports:{}};return t[n].call(r.exports,r,r.exports,i),r.l=!0,r.exports}i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)i.d(n,r,function(e){return t[e]}.bind(null,r));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/dist/",i(i.s=1)}([function(t,e,i){},function(t,e,i){"use strict";i.r(e),i.d(e,"game",(function(){return p}));i(0);function n(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.projectileImg=new Image,this.projectileImg.src=e.img,this.x=e.x,this.y=e.y,this.width=10,this.height=20,this.dx=0,this.dy=e.dy,this.ctx=e.ctx,this.draw=this.draw.bind(this),this.detectHit=this.detectHit.bind(this),this.type=e.type}var e,i,r;return e=t,(i=[{key:"detectHit",value:function(){if(this.hitbox=[this.x,this.x+this.width,this.y+this.height,this.y],"player"===this.type){if(p.enemies)for(var t=0;t<p.enemies.length;t++)if(p.enemies[t]){var e=p.enemies[t].hitBox();this.y<e[2]&&this.x>=e[0]&&this.hitbox[1]<=e[1]&&!(this.hitbox[2]<e[3])&&(console.log("enemy hit by player bullet"),p.removeEnemy(t),this.y=551)}}else if("enemy"===this.type&&p.player){var i=p.player.hitBox();this.hitbox[2]>i[3]&&this.hitbox[0]>=i[0]&&this.hitbox[1]<=i[1]&&!(this.hitbox[3]>i[2])&&(clearInterval(p.playerShot),console.log("player hit by enemy bullet"))}}},{key:"draw",value:function(){this.y+=this.dy,this.ctx.drawImage(this.projectileImg,this.x,this.y,this.width,this.height),this.detectHit(),this.y>550||requestAnimationFrame(this.draw)}}])&&n(e.prototype,i),r&&n(e,r),t}();function s(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var a=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.playerImg=new Image,this.playerImg.src="./src/assets/spaceship.png",this.height=50,this.width=50,this.playerImg.onload=function(){return i.draw()},this.x=this.ctx.canvas.width/2.2,this.y=this.ctx.canvas.height-50,this.draw=this.draw.bind(this),this.dx=0,this.dy=0,this.fireProjectile=this.fireProjectile.bind(this)}var e,i,n;return e=t,(i=[{key:"hitBox",value:function(){return[this.x,this.x+this.width,this.y+this.height,this.y]}},{key:"moveHorizontally",value:function(t){this.dx=t}},{key:"moveVertically",value:function(t){this.dy=t}},{key:"fireProjectile",value:function(){new r({x:this.x+21,y:this.y,dy:-1,ctx:this.ctx,img:"./src/assets/basic-projectile.png",type:"player"}).draw()}},{key:"draw",value:function(){this.x+=this.dx,this.y+=this.dy,this.ctx.drawImage(this.playerImg,this.x,this.y,this.width,this.height)}}])&&s(e.prototype,i),n&&s(e,n),t}();function h(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.backgroundImg=new Image,this.backgroundImg.src="./src/assets/space-background.jpg",this.y=0,this.draw=this.draw.bind(this)}var e,i,n;return e=t,(i=[{key:"draw",value:function(){this.y+=.5,this.ctx.drawImage(this.backgroundImg,0,this.y),this.ctx.drawImage(this.backgroundImg,0,this.y-1600),1600===this.y&&(this.y=0)}}])&&h(e.prototype,i),n&&h(e,n),t}();function l(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.keyDownHandler=this.keyDownHandler.bind(this),this.keyUpHandler=this.keyUpHandler.bind(this),this.ctx.canvas.addEventListener("keydown",this.keyDownHandler),this.ctx.canvas.addEventListener("keyup",this.keyUpHandler)}var e,i,n;return e=t,(i=[{key:"keyDownHandler",value:function(t){p.player&&("ArrowRight"===t.key?p.player.moveHorizontally(5):"ArrowLeft"===t.key?p.player.moveHorizontally(-5):"ArrowUp"===t.key?p.player.moveVertically(-5):"ArrowDown"===t.key&&p.player.moveVertically(5))}},{key:"keyUpHandler",value:function(t){clearInterval(this.keydown),p.player&&("ArrowRight"==t.key||"ArrowLeft"==t.key?p.player.moveHorizontally(0):("ArrowUp"===t.key||"ArrowDown"===t.key)&&p.player.moveVertically(0))}}])&&l(e.prototype,i),n&&l(e,n),t}();function y(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var u=function(){function t(e,i){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.ctx=e,this.time=0,this.enemyImg=new Image,this.enemyImg.src=i.img,this.id=i.id,this.height=i.height,this.width=i.width,this.x=i.x,this.y=i.y,this.dy=i.dy,this.enemyImg.onload=function(){return n.draw()},this.draw=this.draw.bind(this),this.fireProjectile=this.fireProjectile.bind(this),this.selfTimer=this.selfTimer.bind(this)}var e,i,n;return e=t,(i=[{key:"selfTimer",value:function(){this.time++}},{key:"hitBox",value:function(){return[this.x,this.x+this.width,this.y+this.height,this.y]}},{key:"detectCollision",value:function(){var t=this.x,e=this.x+this.width,i=this.y+this.height,n=this.y,r=p.player.hitBox(),s=r[0],a=r[1],h=r[2];i>r[3]&&(s>t&&s<e||a<e&&a>t)&&n<h&&(s>t&&s<e||a<e&&a>t)&&(clearInterval(p.playerShot),clearInterval(this.firingRate),console.log("player and enemy collide"),p.removeEnemy(this.id))}},{key:"fireProjectile",value:function(){this.projectile=new r({x:this.x+30,y:this.y+70,dy:5,ctx:this.ctx,img:"./src/assets/enemy-projectile.png",type:"enemy"}),this.projectile.draw()}},{key:"draw",value:function(){this.y+=this.dy,this.ctx.drawImage(this.enemyImg,this.x,this.y,this.width,this.height),this.detectCollision(),this.y>0&&this.y<1&&(this.firingRate=setInterval(this.fireProjectile,1e3)),this.y>550&&(clearInterval(this.firingRate),delete this.projectile)}}])&&y(e.prototype,i),n&&y(e,n),t}();var d=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.enemies=e};var f=function(t){for(var e=[],i=t.canvas.width,n=0;n<20;n++){var r=new u(t,{img:"./src/assets/enemy-ship.png",height:70,width:70,x:Math.floor(Math.random()*Math.floor(i)),y:-500*Math.random()-100,dy:1,id:n});e.push(r)}return new d(e)};function v(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}var m=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.ctx=i,this.background=new o(this.ctx),this.player=new a(this.ctx),this.draw=this.draw.bind(this),this.setupControls(),this.levels=[f],this.levelidx=0,this.startTime=null,this.setupLevel()}var e,i,n;return e=t,(i=[{key:"enemiesLeft",value:function(){for(var t=0;t<this.enemies.length;t++)if(this.enemies[t])return!0;return!1}},{key:"removeEnemy",value:function(t){for(var e=0;e<this.enemies.length;e++)void 0!==this.enemies[e]&&this.enemies[e].id===t&&(clearInterval(this.enemies[e].firingRate),delete this.enemies[e])}},{key:"setupLevel",value:function(){this.enemies=this.levels[this.levelidx](this.ctx).enemies,this.levelidx++}},{key:"renderBackground",value:function(){this.background.draw()}},{key:"setupControls",value:function(){new c(this.ctx)}},{key:"draw",value:function(t){this.ctx.clearRect(0,0,this.canvas.width,this.canvas.height),this.renderBackground(),this.player.draw();for(var e=0;e<this.enemies.length;e++)this.enemies[e]&&this.enemies[e].draw(t);requestAnimationFrame(this.draw)}},{key:"start",value:function(){requestAnimationFrame(this.draw),this.playerShot=setInterval(this.player.fireProjectile,1e3),this.enemies.length}}])&&v(e.prototype,i),n&&v(e,n),t}(),p=null;document.addEventListener("DOMContentLoaded",(function(){var t=document.getElementById("canvas"),e=t.getContext("2d");(p=new m(t,e)).start()}))}]);
//# sourceMappingURL=main.js.map